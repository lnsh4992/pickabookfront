{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = Compose;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _mediaQueryListByQueryString = {};\nvar _predefinedMediaQueryString = {\n  xs: 'screen and (min-width: 480px)',\n  sm: 'screen and (min-width: 768px)',\n  md: 'screen and (min-width: 992px)',\n  lg: 'screen and (min-width: 1200px)'\n};\n\nfunction _query(key) {\n  return key[0] === '@' || key === 'xs' || key === 'md' || key === 'lg';\n}\n\n;\n\nfunction _onMediaQueryChange(component, query, mediaQueryList) {\n  var media = {};\n  media[query] = mediaQueryList.matches;\n\n  _setStyleState(component, query, media);\n}\n\nfunction _setStyleState(component, key, newState) {\n  var existing = component.state && component.state._media || {};\n  var state = {\n    _media: (0, _objectAssign2['default'])({}, existing)\n  };\n  state._media[key] = state._media[key] || {};\n  (0, _objectAssign2['default'])(state._media[key], newState);\n  component.setState({\n    _media: state._media\n  });\n}\n\nfunction _resolveLayoutGeneral(props, style) {\n  var newStyle = {};\n\n  if (props.block) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].block);\n  }\n\n  if (props.hidden) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].hidden);\n  }\n\n  if (props.invisible) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].invisible);\n  }\n\n  return newStyle;\n}\n\nfunction _resolveLayoutPosition(props, style) {\n  var newStyle = {};\n\n  if (props.relative) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].relative);\n  }\n\n  if (props.absolute) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].absolute);\n  }\n\n  return newStyle;\n}\n\n;\n\nfunction _resolveLayoutFlex(props, style) {\n  var newStyle = {};\n\n  if (props.layout) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].layout, _layout2['default'].vertical);\n\n    if (props.vertical) {\n      props.reverse ? newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].verticalReverse) : newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].vertical);\n    } else {\n      props.reverse ? newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].horizontalReverse) : newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].horizontal);\n    }\n  }\n\n  if (props.inline) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].inline, _layout2['default'].horizontal);\n  }\n\n  props.flex ? newStyle = (0, _objectAssign2['default'])(newStyle, _layout2['default'].flexAuto, style) : newStyle = (0, _objectAssign2['default'])(newStyle, _layout2['default'].flexNone, style);\n  return newStyle;\n}\n\n;\n\nfunction _resolveLayoutAlign(props, style) {\n  var newStyle = {};\n  newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].alignStretch);\n\n  if (props.start) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].alignStart);\n  }\n\n  if (props.center) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].alignCenter);\n  }\n\n  if (props.end) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].alignEnd);\n  }\n\n  if (props.centered) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].centered);\n  }\n\n  return newStyle;\n}\n\n;\n\nfunction _resolveLayoutSelf(props, style) {\n  var newStyle = {};\n\n  if (props.selfStart) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].selfAlignStart);\n  }\n\n  if (props.selfCenter) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].selfAlignCenter);\n  }\n\n  if (props.selfEnd) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].selfAlignEnd);\n  }\n\n  if (props.selfStretch) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].selfAlignStretch);\n  }\n\n  return newStyle;\n}\n\n;\n\nfunction _resolveLayoutJustify(props, style) {\n  var newStyle = {};\n\n  if (props.justifyStart) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyStart);\n  }\n\n  if (props.justifyCenter) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyCenter);\n  }\n\n  if (props.justifyEnd) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyEnd);\n  }\n\n  if (props.justifyStretch) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyStretch);\n  }\n\n  if (props.justifyBetween) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyBetween);\n  }\n\n  if (props.justifyAround) {\n    newStyle = (0, _objectAssign2['default'])(newStyle, style, _layout2['default'].justifyAround);\n  }\n\n  return newStyle;\n}\n\n;\n\nfunction _resolveLayoutStyles(props, style) {\n  return (0, _objectAssign2['default'])({}, _resolveLayoutGeneral(props, style), _resolveLayoutPosition(props, style), _resolveLayoutFlex(props, style), _resolveLayoutAlign(props, style), _resolveLayoutSelf(props, style), _resolveLayoutJustify(props, style));\n}\n\n;\n\nfunction _resolveMediaQueries(component, style) {\n  var newStyle = {};\n\n  if (style) {\n    Object.keys(style).filter(function (name) {\n      return _query(name);\n    }).map(function (query) {\n      var mql = undefined;\n      var mediaQueryStyles = undefined;\n      mediaQueryStyles = style[query];\n      query = query[0] === '@' ? query.replace('@media ', '') : _predefinedMediaQueryString[query];\n      mql = _mediaQueryListByQueryString[query];\n\n      if (!mql) {\n        _mediaQueryListByQueryString[query] = mql = window.matchMedia(query);\n      }\n\n      if (!component._mediaQueryListenersByQuery) {\n        component._mediaQueryListenersByQuery = {};\n      }\n\n      if (!component._mediaQueryListenersByQuery[query]) {\n        (function () {\n          var listener = _onMediaQueryChange.bind(null, component, query);\n\n          mql.addListener(listener);\n          component._mediaQueryListenersByQuery[query] = {\n            remove: function remove() {\n              mql.removeListener(listener);\n            }\n          };\n        })();\n      }\n\n      if (mql.matches) {\n        newStyle = (0, _objectAssign2['default'])({}, style[query], mediaQueryStyles);\n      }\n    });\n  }\n\n  return newStyle;\n}\n\n;\n\nfunction Compose(component, rendered) {\n  var props = rendered.props;\n  var style = props.style;\n  var newProps = {};\n  var newStyle = {};\n\n  if (Array.isArray(style)) {\n    for (var i = 0; i < style.length; i++) {\n      if (!style[i] || typeof style[i] !== 'object' || Array.isArray(style[i])) {\n        console.warn('styles object should be an object');\n      }\n\n      newStyle = (0, _objectAssign2['default'])(newStyle, style[i]);\n    }\n  }\n\n  newStyle = (0, _objectAssign2['default'])(newStyle, _resolveLayoutStyles(props, style));\n  newStyle = (0, _objectAssign2['default'])(newStyle, _resolveMediaQueries(component, style));\n  Object.keys(newStyle).forEach(function (key) {\n    if (_query(key)) {\n      delete newStyle[key];\n    }\n  });\n  newProps = (0, _objectAssign2['default'])(newProps, {\n    style: newStyle\n  });\n  return _react2['default'].cloneElement(rendered, newProps);\n}\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}