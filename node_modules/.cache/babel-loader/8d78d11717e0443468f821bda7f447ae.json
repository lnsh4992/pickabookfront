{"ast":null,"code":"import _classCallCheck from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/logesh/cs307/PickaBook/frontend/gui/src/containers/AuthorDetailView.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Card, Row, Col, List, Icon, Avatar, Spin, message, Rate } from \"antd\";\nimport AuthReviewForm from '../forms/AuthReviewForm';\nvar gridStyle = {\n  textAlign: 'center'\n};\nvar toLeft = {\n  textAlign: 'left'\n};\nvar LikeStyle = {\n  marginRight: 8,\n  color: '#378695'\n};\nvar DislikeStyle = {\n  marginRight: 8,\n  color: '#900e01'\n};\n\nvar IconText = function IconText(_ref) {\n  var type = _ref.type,\n      text = _ref.text,\n      onClick = _ref.onClick,\n      theme = _ref.theme,\n      style = _ref.style;\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    type: type,\n    style: style,\n    onClick: onClick,\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }), text);\n};\n\nvar AuthorDetail =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuthorDetail, _React$Component);\n\n  function AuthorDetail(props) {\n    var _this;\n\n    _classCallCheck(this, AuthorDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthorDetail).call(this, props));\n\n    _this.componentDidMount = function () {\n      var authID = _this.props.match.params.authID;\n      _this._isMounted = true;\n      var profID = localStorage.getItem(\"profID\");\n      axios.get(\"http://127.0.0.1:8000/profile/following/\".concat(profID)).then(function (res) {\n        if (res.data.following.some(function (e) {\n          return e.pk == authID;\n        })) {\n          _this.style = {\n            marginLeft: 10,\n            color: !_this.state.following ? \"#b22222\" : '#daa520'\n          };\n\n          _this.setState({\n            iconType: !_this.state.following ? \"user-delete\" : \"user-add\",\n            following: !_this.state.following\n          });\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n      axios.get(\"http://127.0.0.1:8000/authors/\".concat(authID)).then(function (res) {\n        _this.setState({\n          // book: res.data\n          title: res.data.name,\n          birthdate: res.data.birthdate,\n          numFollowers: res.data.numFollowers,\n          image_url: res.data.image_url,\n          genre: _this.state[res.data.genre],\n          rating: res.data.review,\n          number_of_reviews: res.data.review_count,\n          synopsis: res.data.bio\n        });\n\n        axios.get(\"http://127.0.0.1:8000/library/authorbooks/\".concat(res.data.name)).then(function (ares) {\n          _this.setState({\n            books: ares.data\n          });\n        }).catch(function (error) {\n          return console.log(error);\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n\n      _this.fetchReviews();\n    };\n\n    _this.fetchReviews = function () {\n      var authID = _this.props.match.params.authID;\n      axios.get(\"http://127.0.0.1:8000/authreview/\".concat(authID)).then(function (res) {\n        _this.setState({\n          auth_reviews: res.data,\n          max_length: res.data.length,\n          current_length: Math.min(3, res.data.length)\n        });\n\n        for (var i = 0; i < _this.state.auth_reviews.length; ++i) {\n          _this.state.auth_reviews[i].isLiked = false;\n          _this.state.auth_reviews[i].isDisliked = false;\n        }\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.handleFollow = function () {\n      var profID = localStorage.getItem(\"profID\");\n      var authID = _this.props.match.params.authID;\n      axios.put(\"http://127.0.0.1:8000/profile/addfollow/\".concat(profID), {\n        following: [authID]\n      }).then(function (res) {\n        _this.style = {\n          marginLeft: 10,\n          color: !_this.state.following ? \"#b22222\" : '#daa520'\n        };\n\n        _this.setState({\n          iconType: !_this.state.following ? \"user-delete\" : \"user-add\",\n          following: !_this.state.following\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.handleLike = function (revID, inp) {\n      var review = _this.state.auth_reviews.filter(function (review) {\n        return review.pk === revID;\n      })[0];\n\n      if (review.isDisliked || review.isLiked) return;\n      axios.put(\"http://127.0.0.1:8000/authreview/like/\".concat(revID), {\n        likes: inp === 'like' ? 1 : 0\n      }).then(function (res) {\n        if (inp === 'like') {\n          review.isLiked = true;\n          review.likes += 1;\n        } else {\n          review.isDisliked = true;\n          review.dislikes += 1;\n        }\n\n        _this.setState(_this.state);\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    };\n\n    _this.state = {\n      FA: \"Fantasy\",\n      NF: \"Non Fiction\",\n      RO: \"Romance\",\n      TR: \"Thriller\",\n      MY: \"Mystery\",\n      BI: \"Biography\",\n      FI: \"Fiction\",\n      SF: \"Science Fiction\",\n      books: [],\n      auth_reviews: [],\n      following: false,\n      iconType: \"user-add\"\n    };\n    _this.style = {\n      marginLeft: 10,\n      color: '#daa520'\n    };\n    return _this;\n  }\n\n  _createClass(AuthorDetail, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      console.log(\"Unmounting\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 20,\n        style: {\n          marginBottom: 16\n        },\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Card, {\n        bodyStyle: {\n          padding: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.image_url,\n        style: {\n          width: 194,\n          height: 295\n        },\n        width: \"100%\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        span: 18,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, this.state.title, React.createElement(Icon, {\n          style: this.style,\n          type: this.state.iconType,\n          onClick: this.handleFollow,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        })),\n        headStyle: {\n          fontSize: 20,\n          fontStyle: 'italic',\n          fontFamily: 'Georgia',\n          background: '#020037',\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Birthdate: \")), this.state.birthdate), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Number of Followers: \")), this.state.numFollowers), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Genre: \")), this.state.genre), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Rating: \")), this.state.rating), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Number of reviews: \")), this.state.number_of_reviews)))), React.createElement(Row, {\n        gutter: 20,\n        style: {\n          marginBottom: 16\n        },\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 22,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(Card, {\n        style: toLeft,\n        title: React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'stretch'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }, \"About the Author\"),\n        headStyle: {\n          fontSize: 20,\n          fontStyle: 'italic',\n          fontFamily: 'Georgia',\n          background: '#020037',\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, this.state.synopsis)))), React.createElement(List, {\n        grid: {\n          gutter: 16,\n          column: 4\n        },\n        style: {\n          paddingTop: 20,\n          paddingLeft: 55,\n          paddingBottom: 20\n        },\n        dataSource: this.state.books,\n        renderItem: function renderItem(item) {\n          return React.createElement(List.Item, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251\n            },\n            __self: this\n          }, React.createElement(Card, {\n            hoverable: true,\n            style: {\n              width: 240\n            },\n            cover: React.createElement(\"img\", {\n              alt: item.title,\n              src: item.image_url,\n              style: {\n                width: 238,\n                height: 295\n              },\n              width: \"100%\",\n              height: \"100%\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 257\n              },\n              __self: this\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 254\n            },\n            __self: this\n          }, React.createElement(Card.Meta, {\n            title: React.createElement(\"a\", {\n              href: '/booklist/' + item.pk,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 266\n              },\n              __self: this\n            }, React.createElement(\"b\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 266\n              },\n              __self: this\n            }, item.title)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 265\n            },\n            __self: this\n          })));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), React.createElement(Row, {\n        gutter: 20,\n        style: {\n          marginBottom: 8\n        },\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 22,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'stretch'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, \"Author Reviews\"),\n        headStyle: {\n          fontSize: 20,\n          color: 'white',\n          fontStyle: 'italic',\n          fontFamily: 'Georgia',\n          background: '#020037'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(List, {\n        itemLayout: \"vertical\",\n        size: \"large\",\n        dataSource: this.state.auth_reviews,\n        renderItem: function renderItem(item) {\n          return React.createElement(List.Item, {\n            key: item.id,\n            actions: [React.createElement(IconText, {\n              type: \"like-o\",\n              text: item.likes,\n              onClick: function onClick() {\n                return _this2.handleLike(item.pk, \"like\");\n              },\n              theme: item.isLiked ? 'filled' : 'outlined',\n              style: LikeStyle,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 290\n              },\n              __self: this\n            }), React.createElement(IconText, {\n              type: \"dislike-o\",\n              text: item.dislikes,\n              onClick: function onClick() {\n                return _this2.handleLike(item.pk, \"dislike\");\n              },\n              theme: item.isDisliked ? 'filled' : 'outlined',\n              style: DislikeStyle,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 295\n              },\n              __self: this\n            })],\n            extra: React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 300\n              },\n              __self: this\n            }, React.createElement(Rate, {\n              disabled: true,\n              allowHalf: true,\n              defaultValue: item.rating,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 300\n              },\n              __self: this\n            }), \" \", item.creation_date, \" \"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 289\n            },\n            __self: this\n          }, React.createElement(List.Item.Meta, {\n            avatar: React.createElement(Avatar, {\n              src: item.prof.avatar,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 303\n              },\n              __self: this\n            }),\n            title: item.title,\n            description: React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 306\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              href: '/profile/' + item.prof.pk,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 307\n              },\n              __self: this\n            }, item.prof.first_name + \" \" + item.prof.last_name), item.prof.review_count > 10 && React.createElement(Icon, {\n              style: {\n                marginLeft: 10,\n                color: '#DAA520'\n              },\n              type: \"crown\",\n              theme: \"filled\",\n              twoToneColor: \"#DAA520\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 311\n              },\n              __self: this\n            })),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 302\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 316\n            },\n            __self: this\n          }, item.content));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        gutter: 20,\n        style: {\n          marginBottom: 8\n        },\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 22,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"Add A Review\",\n        headStyle: {\n          fontSize: 20,\n          color: 'white',\n          fontStyle: 'italic',\n          fontFamily: 'Georgia',\n          background: '#020037'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(AuthReviewForm, {\n        authID: this.props.match.params.authID,\n        fetchReviews: this.fetchReviews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return AuthorDetail;\n}(React.Component);\n\nvar Title =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(Title, _React$Component2);\n\n  function Title() {\n    _classCallCheck(this, Title);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Title).apply(this, arguments));\n  }\n\n  _createClass(Title, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"Title\");\n    }\n  }]);\n\n  return Title;\n}(React.Component);\n\nexport default AuthorDetail;","map":{"version":3,"sources":["/home/logesh/cs307/PickaBook/frontend/gui/src/containers/AuthorDetailView.js"],"names":["React","axios","Card","Row","Col","List","Icon","Avatar","Spin","message","Rate","AuthReviewForm","gridStyle","textAlign","toLeft","LikeStyle","marginRight","color","DislikeStyle","IconText","type","text","onClick","theme","style","AuthorDetail","props","componentDidMount","authID","match","params","_isMounted","profID","localStorage","getItem","get","then","res","data","following","some","e","pk","marginLeft","state","setState","iconType","catch","err","console","log","title","name","birthdate","numFollowers","image_url","genre","rating","review","number_of_reviews","review_count","synopsis","bio","ares","books","error","fetchReviews","auth_reviews","max_length","length","current_length","Math","min","i","isLiked","isDisliked","handleFollow","put","handleLike","revID","inp","filter","likes","dislikes","FA","NF","RO","TR","MY","BI","FI","SF","marginBottom","padding","width","height","fontSize","fontStyle","fontFamily","background","display","alignItems","gutter","column","paddingTop","paddingLeft","paddingBottom","item","id","creation_date","prof","avatar","first_name","last_name","content","Component","Title"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Card, Row, Col, List, Icon, Avatar, Spin, message, Rate } from \"antd\";\nimport AuthReviewForm from '../forms/AuthReviewForm';\n\nconst gridStyle = {\n    textAlign: 'center',\n  };\n\nconst toLeft = {\n    textAlign: 'left',\n};\n\nconst LikeStyle = {\n    marginRight : 8,\n    color: '#378695'\n};\n\nconst DislikeStyle = {\n    marginRight : 8,\n    color: '#900e01'\n};\n\nconst IconText = ({ type, text, onClick, theme, style }) => (\n<span>\n    <Icon type={type} style={style} onClick={onClick} theme={theme}/>\n    {text}\n</span>\n);\n\nclass AuthorDetail extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            FA: \"Fantasy\",\n            NF: \"Non Fiction\",\n            RO: \"Romance\",\n            TR: \"Thriller\",\n            MY: \"Mystery\",\n            BI: \"Biography\",\n            FI: \"Fiction\",\n            SF: \"Science Fiction\",\n            books: [],\n            auth_reviews: [],\n            following: false,\n            iconType: \"user-add\"\n        };\n\n        this.style={marginLeft: 10, color: '#daa520'}\n    }  \n\n    componentDidMount = () => {\n        const authID = this.props.match.params.authID;\n        this._isMounted=true;\n        const profID = localStorage.getItem(\"profID\");\n        \n        axios.get(`http://127.0.0.1:8000/profile/following/${profID}`).then(res => {\n            if(res.data.following.some(e => e.pk == authID)) {\n                this.style = {\n                    marginLeft: 10,\n                    color: !this.state.following ? \"#b22222\": '#daa520'\n                }\n                this.setState({\n                    iconType: !this.state.following ? \"user-delete\" : \"user-add\" ,\n                    following: !this.state.following\n                });\n            }\n        })\n        .catch(err => { console.log(err) });\n\n        axios.get(`http://127.0.0.1:8000/authors/${authID}`).then(res => {\n          this.setState({\n            // book: res.data\n            title: res.data.name,\n            birthdate: res.data.birthdate,\n            numFollowers: res.data.numFollowers,\n            image_url: res.data.image_url,\n            genre: this.state[res.data.genre],\n            rating: res.data.review,\n            number_of_reviews: res.data.review_count,\n            synopsis: res.data.bio\n          });\n\n          axios.get(`http://127.0.0.1:8000/library/authorbooks/${res.data.name}`).then(ares => {\n              this.setState({\n                  books: ares.data\n              });\n          })\n          .catch(error => console.log(error));\n        })\n        .catch(error => console.log(error));\n\n        this.fetchReviews();\n    }\n\n    fetchReviews = () => {\n        const authID = this.props.match.params.authID;\n        axios.get(`http://127.0.0.1:8000/authreview/${authID}`).then(res => {\n            this.setState({\n                auth_reviews: res.data,\n                max_length: res.data.length,\n                current_length: Math.min(3, res.data.length)\n            })\n            for(var i=0; i<this.state.auth_reviews.length; ++i){\n                this.state.auth_reviews[i].isLiked = false\n                this.state.auth_reviews[i].isDisliked = false\n            }\n\n        })\n        .catch(error => console.log(error));\n    }\n\n    componentWillUnmount(){\n        this._isMounted = false;\n        console.log(\"Unmounting\");\n    }\n\n    handleFollow = () => {\n        const profID = localStorage.getItem(\"profID\");\n        const authID = this.props.match.params.authID;\n        axios.put(`http://127.0.0.1:8000/profile/addfollow/${profID}`, {\n            following: [authID]\n        })\n        .then(res => {\n            this.style = {\n                marginLeft: 10,\n                color: !this.state.following ? \"#b22222\": '#daa520'\n            }\n            this.setState({\n                iconType: !this.state.following ? \"user-delete\" : \"user-add\" ,\n                following: !this.state.following\n            });\n            \n\n        })\n        .catch(error => console.log(error));\n    }\n\n    handleLike = (revID, inp) => {\n        var review = this.state.auth_reviews.filter(review => review.pk === revID)[0];\n        if (review.isDisliked || review.isLiked)\n            return;\n\n        axios.put(`http://127.0.0.1:8000/authreview/like/${revID}`, {\n            likes: inp === 'like' ? 1 : 0\n        }).then(res => {\n                \n                if (inp === 'like') {\n                    review.isLiked = true;\n                    review.likes += 1;\n                }\n                else {\n                    review.isDisliked = true;\n                    review.dislikes += 1;\n                }\n                this.setState(this.state);\n            })\n            .catch(error => console.log(error));\n    }\n\n    render() {\n        return (\n                <div>\n                    <Row gutter={20} style={{ marginBottom: 16 }} type=\"flex\" justify=\"center\">\n                        <Col span={4}>\n                            <Card bodyStyle={{\n                                padding: 0\n                            }}>\n                                <img src={this.state.image_url} \n                                style={{\n                                    width: 194, height: 295\n                                }}\n                                width=\"100%\" height=\"100%\" >\n                                </img>\n                            </Card>\n                        </Col>\n                        \n                        <Col span={18}>\n                            <Card title={\n                                    <div>\n                                        {this.state.title} \n                                        <Icon style={this.style} type={this.state.iconType}\n                                            onClick={this.handleFollow} />\n                                    </div>\n                                }\n                                \n                                headStyle={{\n                                    fontSize: 20,\n                                    fontStyle: 'italic',\n                                    fontFamily: 'Georgia', \n                                    background: '#020037',\n                                    color: 'white'\n                                }}\n                            >\n                                <p>\n                                    <b><i>Birthdate: </i></b> \n                                    {this.state.birthdate}\n                                </p>\n                                \n                                <p>\n                                    <b><i>Number of Followers: </i></b> \n                                    {this.state.numFollowers}\n                                </p>\n                                \n                                <p>\n                                    <b><i>Genre: </i></b>\n                                    {this.state.genre}\n                                </p>\n\n                                <p>\n                                    <b><i>Rating: </i></b>\n                                    {this.state.rating}\n                                </p>\n\n                                <p>\n                                    <b><i>Number of reviews: </i></b>\n                                    {this.state.number_of_reviews}\n                                </p>\n                            </Card>\n                        </Col>\n\n                    </Row>\n\n                    <Row gutter={20} style={{ marginBottom: 16 }} type=\"flex\" justify=\"center\">\n                        <Col span={22}>\n                            <Card style={toLeft} title={<div style={{display:'flex', alignItems: 'stretch'}}>About the Author</div>}\n                            headStyle={{\n                                fontSize: 20,\n                                fontStyle: 'italic',\n                                fontFamily: 'Georgia', \n                                background: '#020037',\n                                color: 'white'\n                            }}\n                            >\n                                <p>\n                                    {this.state.synopsis}\n                                </p>\n                            </Card>\n                        </Col>\n                    </Row>\n\n                    \n                    <List\n                        grid={{ gutter: 16, column: 4 }}\n                        style={{\n                            paddingTop: 20, paddingLeft: 55, paddingBottom: 20\n                        }}\n                        dataSource={this.state.books}\n                        renderItem={item => (\n                        <List.Item>\n\n\n                            <Card\n                                hoverable\n                                style={{ width: 240 }}\n                                cover={<img alt={item.title} \n                                            src={item.image_url} \n                                            style={{\n                                                width: 238, height: 295\n                                            }}\n                                            width=\"100%\" height=\"100%\"\n                                />}\n                            >\n                                <Card.Meta\n                                title={<a href={'/booklist/'+item.pk}><b>{item.title}</b></a>}\n                                \n                                />\n                            </Card>\n                        </List.Item>\n                        )}\n                    />\n\n                    <Row gutter={20} style={{ marginBottom: 8 }} type=\"flex\" justify=\"center\">\n                        <Col span={22}>\n                            <Card title={<div style={{display:'flex', alignItems: 'stretch'}}>Author Reviews</div>}\n                            headStyle={{\n                                fontSize: 20,\n                                color: 'white',\n                                fontStyle: 'italic',\n                                fontFamily: 'Georgia', \n                                background: '#020037'\n                            }}>\n                            <List\n                                    itemLayout=\"vertical\"\n                                    size=\"large\"\n                                    dataSource={this.state.auth_reviews}\n                                    renderItem={item => (\n                                    <List.Item key={item.id}\n                                            actions={[<IconText type=\"like-o\" \n                                                                text={item.likes} \n                                                                onClick={() => this.handleLike(item.pk, \"like\")} \n                                                                theme = {item.isLiked ? 'filled' : 'outlined'}\n                                                                style = {LikeStyle}/>, \n                                                      <IconText type=\"dislike-o\" \n                                                                text={item.dislikes} \n                                                                onClick={() => this.handleLike(item.pk, \"dislike\")}\n                                                                theme = {item.isDisliked ? 'filled' : 'outlined'}\n                                                                style = {DislikeStyle} />]}\n                                            extra={<div><Rate disabled allowHalf defaultValue={item.rating} /> {item.creation_date} </div>}\n                                    >\n                                        <List.Item.Meta\n                                            avatar={<Avatar src={item.prof.avatar} />}\n                                            title={item.title}\n                                            description={\n                                                <div>\n                                                    <a href={'/profile/'+item.prof.pk}>{item.prof.first_name + \" \" + item.prof.last_name}\n                                                    </a>\n                                                {\n                                                    item.prof.review_count > 10 &&\n                                                    <Icon style={{marginLeft: 10, color: '#DAA520'}} type=\"crown\" theme=\"filled\" twoToneColor=\"#DAA520\" />\n                                                }\n                                                </div>    \n                                            }\n                                        />\n                                        <div>{item.content}</div>\n                                    </List.Item>\n                                    )}\n                                >\n\n                                </List>\n                            </Card>\n                        </Col>\n                    </Row>\n\n                    <Row gutter={20} style={{ marginBottom: 8 }} type=\"flex\" justify=\"center\">\n                        <Col span={22}>\n                            <Card title=\"Add A Review\"\n                            headStyle={{\n                                fontSize: 20,\n                                color: 'white',\n                                fontStyle: 'italic',\n                                fontFamily: 'Georgia', \n                                background: '#020037'\n                            }}>\n                                <AuthReviewForm authID={this.props.match.params.authID} fetchReviews={this.fetchReviews} />\n                            </Card>\n                        </Col>\n                    </Row>\n                </div>\n        )\n    }\n}\n\nclass Title extends React.Component {\n    render() {\n        return (\n            <h2>\n                Title\n            </h2>\n        );\n    }\n}\n\nexport default AuthorDetail;"]},"metadata":{},"sourceType":"module"}