{"ast":null,"code":"import _classCallCheck from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/logesh/cs307/PickaBook/frontend/gui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/logesh/cs307/PickaBook/frontend/gui/src/containers/Header.js\";\nimport React from 'react';\nimport { Nav, Navbar, NavDropdown, Form, FormControl, Button, Modal } from 'react-bootstrap';\nimport { Select } from 'antd';\nimport axios from 'axios';\nimport * as actions from '../store/actions/auth';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\nvar FormItem = Form.Item;\nvar Option = Select.Option;\n\nvar CustomHeader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CustomHeader, _React$Component);\n\n  function CustomHeader(props) {\n    var _this;\n\n    _classCallCheck(this, CustomHeader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CustomHeader).call(this, props));\n\n    _this.handleFilter = function (value) {\n      _this.setState({\n        filter: value\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.LoginRoute = function () {\n      _this.props.history.push('/login');\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        target: event.target.elements.tgtname.value\n      });\n\n      console.log(_this.state.filter);\n\n      if (_this.state.filter === \"book\") {\n        console.log(event.target.elements.tgtname.value);\n        axios.get(\"http://127.0.0.1:8000/library/view/\".concat(event.target.elements.tgtname.value)).then(function (res) {\n          _this.props.history.push(\"/booklist/\".concat(res.data.pk, \"/\"));\n        }).catch(function (err) {\n          _this.setState({\n            show: true\n          });\n        });\n      }\n\n      if (_this.state.filter === \"author\") {\n        axios.get(\"http://127.0.0.1:8000/authors/view/\".concat(event.target.elements.tgtname.value)).then(function (res) {\n          console.log(res);\n\n          _this.props.history.push(\"/authors/\".concat(res.data.pk, \"/\"));\n        }).catch(function (err) {\n          _this.setState({\n            show: true\n          });\n        });\n      }\n\n      if (_this.state.filter === \"profile\") {\n        var name = event.target.elements.tgtname.value.split(\" \");\n        axios.get(\"http://127.0.0.1:8000/profile/search/\".concat(name[0], \"/\").concat(name[1], \"/\")).then(function (res) {\n          _this.props.history.push(\"/profile/\".concat(res.data.pk, \"/\"));\n        }).catch(function (err) {\n          _this.setState({\n            show: true\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      filter: \"book\",\n      show: false\n    };\n    return _this;\n  }\n\n  _createClass(CustomHeader, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props.isAuthenticated);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), this.props.isAuthenticated ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        bg: \"dark\",\n        expand: \"lg\",\n        variant: \"dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Navbar.Brand, {\n        href: \"#home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"PickaBook\"), React.createElement(Navbar.Toggle, {\n        \"aria-controls\": \"basic-navbar-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(Navbar.Collapse, {\n        id: \"basic-navbar-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        className: \"mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Nav.Link, {\n        href: \"/explore\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Explore\"), React.createElement(NavDropdown, {\n        title: \"Profile\",\n        id: \"basic-nav-dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(NavDropdown.Item, {\n        href: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"My Profile\"), React.createElement(NavDropdown.Item, {\n        href: \"/updateprof\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Update Profile\")), this.props.isAuthenticated ? React.createElement(Nav.Link, {\n        onClick: this.props.logout,\n        href: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Logout\") : React.createElement(Nav.Link, {\n        href: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Login\")), React.createElement(Form, {\n        inline: true,\n        onSubmit: function onSubmit(event) {\n          return _this2.handleFormSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        type: \"text\",\n        placeholder: \"Search\",\n        className: \"mr-sm-2\",\n        name: \"tgtname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"outline-success\",\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Search\")), React.createElement(NavDropdown, {\n        title: \"Filter\",\n        id: \"basic-nav-dropdown\",\n        onSelect: function onSelect(value) {\n          return _this2.handleFilter(value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(NavDropdown.Item, {\n        eventKey: \"book\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Book\"), React.createElement(NavDropdown.Item, {\n        eventKey: \"author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Author\"), React.createElement(NavDropdown.Item, {\n        eventKey: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Profile\")))), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Error Not Found!\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Unfortunately, we can't find \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, this.state.filter), \" \", this.state.target), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Close\")))) : React.createElement(Modal, {\n        show: true,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Not Logged In!\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Please Login, in order to access the contents of our site\"), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.LoginRoute,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Login\"))));\n    }\n  }]);\n\n  return CustomHeader;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logout: function logout() {\n      return dispatch(actions.logout());\n    }\n  };\n};\n\nexport default withRouter(connect(null, mapDispatchToProps)(CustomHeader));","map":{"version":3,"sources":["/home/logesh/cs307/PickaBook/frontend/gui/src/containers/Header.js"],"names":["React","Nav","Navbar","NavDropdown","Form","FormControl","Button","Modal","Select","axios","actions","connect","Link","withRouter","FormItem","Item","Option","CustomHeader","props","handleFilter","value","setState","filter","handleClose","show","LoginRoute","history","push","handleFormSubmit","event","preventDefault","target","elements","tgtname","console","log","state","get","then","res","data","pk","catch","err","name","split","isAuthenticated","logout","Component","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Nav, Navbar, NavDropdown, Form, FormControl, Button, Modal } from 'react-bootstrap';\nimport { Select } from 'antd';\nimport axios from 'axios';\nimport * as actions from '../store/actions/auth';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\nclass CustomHeader extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            filter: \"book\",\n            show: false\n        };\n    }\n\n    handleFilter = (value) => {\n        this.setState({\n            filter: value\n        });\n    }\n\n    handleClose = () => {\n        this.setState({\n            show: false\n        });\n    }\n\n    LoginRoute = () => {\n        this.props.history.push('/login');\n    }\n\n    handleFormSubmit = (event) => {\n        event.preventDefault();\n\n        this.setState({\n            target: event.target.elements.tgtname.value\n        })\n        console.log(this.state.filter)\n        if ( this.state.filter === \"book\" ){\n            console.log(event.target.elements.tgtname.value);\n            axios.get(`http://127.0.0.1:8000/library/view/${event.target.elements.tgtname.value}`)\n            .then(res => {\n                this.props.history.push(`/booklist/${res.data.pk}/`);\n            })\n            .catch(err => {\n                this.setState({\n                    show: true\n                });\n            })\n        }\n\n        if (this.state.filter === \"author\"){\n            axios.get(`http://127.0.0.1:8000/authors/view/${event.target.elements.tgtname.value}`)\n            .then(res =>{\n                console.log(res);\n                this.props.history.push(`/authors/${res.data.pk}/`);\n            })\n            .catch(err => {\n                this.setState({\n                    show: true\n                });\n            })\n        }\n\n        if ( this.state.filter === \"profile\"){\n            var name = event.target.elements.tgtname.value.split(\" \")\n            axios.get(`http://127.0.0.1:8000/profile/search/${name[0]}/${name[1]}/`)\n            .then(res => {\n                this.props.history.push(`/profile/${res.data.pk}/`);\n            })\n            .catch(err => {\n                this.setState({\n                    show: true\n                });\n            })\n        }\n\n    }\n\n    render() {\n        console.log(this.props.isAuthenticated)\n        return (\n            <div>\n                <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css\" />\n                {\n                    this.props.isAuthenticated ?\n                    \n                    <div>\n                    <Navbar bg=\"dark\" expand=\"lg\" variant=\"dark\">\n                        <Navbar.Brand href=\"#home\">PickaBook</Navbar.Brand>\n                        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n                        <Navbar.Collapse id=\"basic-navbar-nav\">\n                        <Nav className=\"mr-auto\">\n                        <Nav.Link href=\"/explore\">Explore</Nav.Link>\n                        <NavDropdown title=\"Profile\" id=\"basic-nav-dropdown\">\n                            <NavDropdown.Item href=\"/profile\">My Profile</NavDropdown.Item>\n                            <NavDropdown.Item href=\"/updateprof\">Update Profile</NavDropdown.Item>\n                        </NavDropdown>\n                        \n                        {\n                            this.props.isAuthenticated ? \n                            <Nav.Link onClick={this.props.logout} href=\"/login\">Logout</Nav.Link>\n                            :\n                            <Nav.Link href=\"/login\">Login</Nav.Link>\n                        }\n\n                        </Nav>\n                        <Form inline onSubmit={(event) => this.handleFormSubmit(event)}>\n                        <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" name=\"tgtname\" />\n                        <Button variant=\"outline-success\" type=\"primary\">Search</Button>\n                        </Form>\n                        \n                        <NavDropdown title=\"Filter\" id=\"basic-nav-dropdown\" \n                        onSelect={(value => this.handleFilter(value))}>\n                        <NavDropdown.Item eventKey=\"book\">Book</NavDropdown.Item>\n                        <NavDropdown.Item eventKey=\"author\">Author</NavDropdown.Item> \n                        <NavDropdown.Item eventKey=\"profile\">Profile</NavDropdown.Item>       \n                        </NavDropdown>\n                        \n\n                        </Navbar.Collapse>\n                    </Navbar>\n\n                    <Modal show={this.state.show} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Error Not Found!</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>Unfortunately, we can't find <b>{this.state.filter}</b> {this.state.target}</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={this.handleClose}>\n                        Close\n                        </Button>\n\n                    </Modal.Footer>\n                    </Modal>\n                    </div>\n\n                    :\n\n                    <Modal show={true} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Not Logged In!</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>Please Login, in order to access the contents of our site</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"primary\" onClick={this.LoginRoute}>\n                            Login\n                        </Button>\n\n                    </Modal.Footer>\n                    </Modal>\n\n                }\n            \n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        logout: () => dispatch(actions.logout())\n    }\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(CustomHeader));\n"]},"metadata":{},"sourceType":"module"}